\* CD-Raft TLA+ Configuration File
\* 这个配置文件用于TLC模型检查器

\* ==== 常量定义 ====

\* 定义域的集合 - 从3个域开始测试
CONSTANTS
    Domain = {d1, d2, d3}
    
\* 定义域状态常量
CONSTANTS
    DomainLeader = "DomainLeader"
    MasterLeader = "MasterLeader" 
    Follower = "Follower"
    Nil = "Nil"

\* 定义消息类型常量
CONSTANTS
    MasterElectionRequest = "MasterElectionRequest"
    MasterElectionResponse = "MasterElectionResponse"
    CrossDomainReq = "CrossDomainReq"
    CrossDomainResp = "CrossDomainResp"
    FastReturnRequest = "FastReturnRequest"
    FastReturnResponse = "FastReturnResponse"

\* ==== 规范定义 ====
SPECIFICATION Spec

\* ==== 不变量检查 ====
\* 基本安全属性
INVARIANTS
    NoTwoMasterLeaders
    MasterElectionSafety
    CrossDomainCommitSafety
    FastReturnSafety
    FastReturnResponseConsistency
    NoDuplicateFastReturnRequests
    RecoverySafety
    TermMonotonicity

\* ==== 属性检查 ====
\* 活性属性 - 注意：这些可能会导致状态空间爆炸
\* 建议先用安全属性测试，再逐步添加活性属性
\* PROPERTIES
\*     EventualMasterLeader
\*     WeakEventualMasterLeader
\*     EventualCrossDomainReplication

\* ==== 状态约束 ====
\* 限制状态空间大小，防止模型检查器运行时间过长
CONSTRAINT StateConstraint

\* ==== 检查配置 ====
\* 设置检查的深度和宽度
CHECK_DEADLOCK FALSE

\* ==== 调试选项 ====
\* 如果需要调试，可以取消注释以下行
\* VIEW vars